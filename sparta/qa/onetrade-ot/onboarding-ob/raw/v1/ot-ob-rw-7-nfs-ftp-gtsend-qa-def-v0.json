{"id":"fd633a9a-dcbd-4bee-a80b-7552fa353fb6","name":"ot-ob-rw-7-nfs-ftp-gtsend-qa-def","description":"Movemos el fichero consolidado de ok/ko de Sales Force a Raw para proceder a su tratamiento.","settings":{"global":{"executionMode":"marathon","userPluginsJars":[],"preExecutionSqlSentences":[],"postExecutionSqlSentences":[],"addAllUploadedPlugins":true,"mesosConstraint":"spark:true","mesosConstraintOperator":"LIKE","parametersLists":["Environment"],"parametersUsed":["COUNTRY","DATE","Global.SPARK_CORES_MAX","Global.SPARK_DRIVER_CORES","Global.SPARK_DRIVER_JAVA_OPTIONS","Global.SPARK_DRIVER_MEMORY","Global.SPARK_EXECUTOR_CORES","Global.SPARK_EXECUTOR_EXTRA_JAVA_OPTIONS","Global.SPARK_EXECUTOR_MEMORY","Global.SPARK_LOCALITY_WAIT","Global.SPARK_LOCAL_PATH","Global.SPARK_MEMORY_FRACTION","Global.SPARK_TASK_MAX_FAILURES","SFTP_CONN_STRING"],"udfsToRegister":[],"udafsToRegister":[],"mesosRole":"","marathonDeploymentSettings":{"gracePeriodSeconds":"240","intervalSeconds":"20","timeoutSeconds":"20","maxConsecutiveFailures":"3","forcePullImage":true,"privileged":false,"userEnvVariables":[],"userLabels":[]},"enableQualityRules":true},"streamingSettings":{"window":"2s","blockInterval":"100ms","checkpointSettings":{"checkpointPath":"sparta/checkpoint","enableCheckpointing":true,"autoDeleteCheckpoint":true,"addTimeToCheckpointPath":false}},"sparkSettings":{"master":"mesos://zk://master.mesos:2181/mesos","sparkKerberos":true,"sparkDataStoreTls":true,"sparkMesosSecurity":true,"submitArguments":{"userArguments":[],"deployMode":"client","driverJavaOptions":"{{{Global.SPARK_DRIVER_JAVA_OPTIONS}}}"},"sparkConf":{"sparkResourcesConf":{"coresMax":"{{{Global.SPARK_CORES_MAX}}}","executorMemory":"{{{Global.SPARK_EXECUTOR_MEMORY}}}","executorCores":"{{{Global.SPARK_EXECUTOR_CORES}}}","driverCores":"{{{Global.SPARK_DRIVER_CORES}}}","driverMemory":"{{{Global.SPARK_DRIVER_MEMORY}}}","mesosExtraCores":"","localityWait":"{{{Global.SPARK_LOCALITY_WAIT}}}","taskMaxFailures":"{{{Global.SPARK_TASK_MAX_FAILURES}}}","sparkMemoryFraction":"{{{Global.SPARK_MEMORY_FRACTION}}}","sparkParallelism":""},"sparkHistoryServerConf":{"enableHistoryServerMonitoring":false,"sparkHistoryServerEventLogRotateEnable":false,"sparkHistoryServerEventLogRotateNum":"9","sparkHistoryServerEventLogRotateSize":"512"},"userSparkConf":[],"coarse":true,"sparkUser":"","sparkLocalDir":"{{{Global.SPARK_LOCAL_PATH}}}","sparkKryoSerialization":false,"sparkSqlCaseSensitive":true,"logStagesProgress":false,"hdfsTokenCache":true,"executorExtraJavaOptions":"{{{Global.SPARK_EXECUTOR_EXTRA_JAVA_OPTIONS}}}"}},"errorsManagement":{"genericErrorManagement":{"whenError":"Error"},"transformationStepsManagement":{"whenError":"Error","whenRowError":"RowError","whenFieldError":"FieldError"},"transactionsManagement":{"sendToOutputs":[],"sendStepData":false,"sendPredecessorsData":true,"sendInputData":true}}},"pipelineGraph":{"nodes":[{"name":"FileUtils","stepType":"Output","className":"FileUtilsOutputStep","classPrettyName":"FileUtils","arity":["NullaryToNullary","NaryToNullary"],"uiConfiguration":{"position":{"x":766,"y":154}},"configuration":{"fileActionsOnComplete":"[]","inputBinary":"{\"inputBinaryField\":\"\",\"inputBinaryDestinationPath\":\"\",\"inputBinaryDestinationField\":\"\",\"errorPolicy\":\"Error\"}","inputFromDataframe":"{\"inputDataframeAction\":\"COPY\",\"inputDataframeField\":\"Source\",\"inputDataframeDestination\":\"Destination\",\"deleteDestinationBeforeFromDataframe\":false,\"addTimestampToFilenameFromDataframe\":false,\"errorPolicy\":\"Error\"}","errorTableName":""},"supportedEngines":["Streaming","Batch"],"executionEngine":"Batch","lineageProperties":[],"outputsWriter":[]},{"name":"RowPathsInicio","stepType":"Input","className":"RowGeneratorInputStep","classPrettyName":"RowGenerator","arity":["NullaryToNary"],"description":"Paso los par√°metros para las rutas del fileutils","uiConfiguration":{"position":{"x":135,"y":103}},"configuration":{"rows":[{"fields":[{"fieldName":"Source","fieldValue":"{{{SFTP_CONN_STRING}}}/gts/onetrade/Onboarding/{{{COUNTRY}}}/GTSEND/onboarding{{{COUNTRY}}}{{{DATE}}}_GTSEND.json","type":"string"},{"fieldName":"Destination","fieldValue":"hdfs://gts-hdfs/gts/data/raw/unformatted/onetrade/onboarding/{{{COUNTRY}}}/GTSEND/","type":"string"}]}],"debugOptions":"{\"query\":\"select 'sftp://rpalacios2:Stratio%4019@10.0.0.5/gts/onetrade/Onboarding/{{{COUNTRY}}}/GTSEND/onboarding{{{COUNTRY}}}{{{DATE}}}_GTSEND.json' as source,\\n'hdfs://gts-hdfs/gts/data/raw/onetrade/unformatted/{{{COUNTRY}}}/GTSEND' as destination from table1 limit 1\"}","errorTableName":""},"supportedEngines":["Batch"],"executionEngine":"Batch","supportedDataRelations":["ValidData"],"lineageProperties":[],"outputsWriter":[{"saveMode":"Append","outputStepName":"FileUtils","tableName":"","discardTableName":"","extraOptions":{"saveMode":"Append"}}]}],"edges":[{"origin":"RowPathsInicio","destination":"FileUtils","dataType":"ValidData"}],"annotations":[]},"executionEngine":"Batch","uiSettings":{"position":{"x":0,"y":0,"k":1}},"creationDate":"2020-01-29T11:46:28Z","lastUpdateDate":"2020-01-29T10:51:09Z","version":0,"group":{"id":"ab7361e4-761c-4883-afc8-b071f068f0dd","name":"/home/qa/onetrade-ot/onboarding-ob/raw/v1"},"debugMode":false,"versionSparta":"2.11.1-7a22d44","groupId":"ab7361e4-761c-4883-afc8-b071f068f0dd"}